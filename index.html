<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="mapbox-token" content="pk.eyJ1Ijoib2xhbm9kIiwiYSI6IjdZdV9iTTQifQ.HP-razZKsNmITPgHs4ugIA">
	<title>Chat</title>
	<script type="module" src="chat.js" async></script>
	<style>
     html, body { margin: 0; padding: 0; height: 100%; }
     :not(:defined) { opacity: 0; }
     do-chat { height: 100%; }
	</style>
</head>

<body>
	<do-chat channel="serious-talk">
		<do-dude name="daniel" slot="people">Daniel</do-dude>
		<do-dude name="bob" slot="people">Bob</do-dude>
		
		<do-msg from="daniel" datetime="2020-01-01T12:34:59Z">
			Hola! ðŸ˜„
		</do-msg>
		<do-msg from="bob" datetime="2020-01-01T12:34:56Z">
			Hello! :)
			
			I'm Bob.
		</do-msg>

		<form slot="action">
			<input name="from" type="hidden" value="daniel"/>
			<textarea name="message"></textarea>
			<button>send</button>
		</form>
	</do-chat>

	<script type="module">
	 const chan = new BroadcastChannel('serious-talk')
     chan.addEventListener('message', ({data}) => console.log(data))
	</script>
</body>

</html>
